var socket=io.connect("http://127.0.0.1:3000/"),app=app||{};$(function(){function zero(){return 0}function range(start,stop,step){if("undefined"==typeof stop&&(stop=start,start=0),"undefined"==typeof step&&(step=1),step>0&&start>=stop||0>step&&stop>=start)return[];for(var result=[],i=start;step>0?stop>i:i>stop;i+=step)result.push(i);return result}var data={labels:range(0,24,1).map(function(x){return"-"+("0"+x+":00").substr(-5)}),datasets:[{label:"Views per hour",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:range(0,24,1).map(zero)}]},ctx=$("#myChart").get(0).getContext("2d");myLineChart=new Chart(ctx).Line(data),socket.on("viewupdates",function(msgdata){for(var i=0;i<msgdata.viewcounts.length;i++)myLineChart.datasets[0].points[i].value=msgdata.viewcounts[i],myLineChart.scale.xLabels[i]=msgdata.labels[i];myLineChart.update()})});